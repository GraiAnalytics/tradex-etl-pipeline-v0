# ==============================================================================
# x_basic.yaml — configuración X API (planes + paginación + campos)
# Date: 2026-01-06 (America/Santiago)
# Reviewed by: Joaquin Cabello
#
# Notes:
# - timezone: zona horaria usada para interpretar/normalizar timestamps y ventanas de consulta.
# - plan_on_use: plan activo (free|basic|pro).
# - plan: parámetros por plan (costos, caps y rate limits).
#   - price_monthly: precio mensual del plan (referencial).
#   - posts_cap_monthly: tope mensual de posts recibidos.
#   - app_cap: máximo de apps permitidos por plan.
#   - rate_limit_*: límites de requests ("COUNTS" NO cuenta para el cap mensual).
#   - soft_daily_cap / soft_hourly_cap: límites “blandos” para alertar/cortar antes del hard cap.
#   - stop_on_cap: si true, detiene la ingesta al alcanzar un cap blando.
# - since_id / start_time / pagination_token: cursores para incremental fetch y paginación.
# - granularity: granularidad de agregación para counts (minute|hour|day).
# - max_results: máximo ítems por request (rango 10 <= x <= 100).
# - tweet_fields: lista de campos a solicitar.
# - expansions: relaciones a expandir (autores, media, replies, etc.) para evitar llamadas extra.
# ==============================================================================

timezone: America/Santiago

plan_on_use: basic 

plan:
  free:
    price_monthly: 0
    posts_cap_monthly: 100
    app_cap: 1
    rate_limit_counts_recent:           # 1 per 15 min -> 0.0011/s
    rate_limit_search_recent_per_user:  # 1 per 15 min -> 0.0011/s
    rate_limit_search_recent_per_app:   # 1 per 15 min -> 0.0011/s
    soft_daily_cap: 2                   # ~100/mes / 30 ≈ 3 → 2 para holgura
    soft_hourly_cap: 40                 # conservador; ajusta según consumo real
    stop_on_cap: true                   # detiene ingesta si supera el tope
  basic:
    price_monthly: 200
    posts_cap_monthly: 15000            # presupuesto mensual
    app_cap: 2
    rate_limit_counts_recent:           # 5 per 15 min -> 0.0055/s
    rate_limit_search_recent_per_user:  # 60 per 15 min -> 0.066/s
    rate_limit_search_recent_per_app:   # 60 per 15 min -> 0.066/s
    soft_daily_cap: 450                 # ~15k/mes / 30 ≈ 500 → 450 para holgura
    soft_hourly_cap: 40                 # conservador; ajusta según consumo real
    stop_on_cap: true                   # detiene ingesta si supera el tope
  pro:
    price_monthly: 5000
    posts_cap_monthly: 1000000          # presupuesto mensual
    app_cap: 3
    rate_limit_counts_recent:           # 300 per 15 min -> 0.33/s
    rate_limit_search_recent_per_user:  # 300 per 15 min -> 0.5/s
    rate_limit_search_recent_per_app:   # 450 per 15 min -> 0.5/s
    soft_daily_cap: 31600               # ~1M/mes / 30 ≈ 33333 → 31600 para holgura
    soft_hourly_cap: 40                 # conservador; ajusta según consumo real
    stop_on_cap: true                   # detiene ingesta si supera el tope
  

since_id: 
start_time:  
pagination_token: 

granularity: day # string: minute | hour | day

max_results: 10 # int : 10 <= x <= 100

tweet_fields: [
  "article",
  "attachments",
  "author_id",
  "card_uri",
  "community_id",
  "context_annotations",
  "conversation_id",
  "created_at",
  "display_text_range",
  "edit_controls",
  "edit_history_tweet_ids",
  "entities",
  "geo",
  "id",
  "in_reply_to_user_id",
  "lang",
  "media_metadata",
  "note_tweet",
  "possibly_sensitive",
  "public_metrics",
  "referenced_tweets",
  "reply_settings",
  "scopes",
  "source",
  "suggested_source_links",
  "suggested_source_links_with_counts",
  "text",
  "withheld",
]

expansions: [
  "author_id",
  "referenced_tweets.id",
  "edit_history_tweet_ids",
  "in_reply_to_user_id",
  "attachments.media_keys",
  "attachments.poll_ids",
  "geo.place_id",
  "entities.mentions.username",
  "referenced_tweets.id.author_id",
  ]
